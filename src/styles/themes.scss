/**
 * Gemini 風格主題配色
 *
 * 參考 Google Gemini 的設計系統：
 * - 淺色主題：白色背景 + 漸層紫藍色強調
 * - 深色主題：True-black (#000000) + 霓虹色強調
 * - 漸層色彩：紫色 → 粉色 → 藍色
 *
 * 使用 CSS 變數（Custom Properties）實現主題切換
 */

/**
 * ==================== 淺色主題 ====================
 */
body[data-theme='light'],
body.light-theme {
  // 主要顏色（Gemini 紫色系）
  --color-primary: #8b5cf6;
  --color-primary-light: #a78bfa;
  --color-primary-dark: #7c3aed;
  --color-primary-contrast: #ffffff;

  // 次要顏色（Gemini 粉色系）
  --color-secondary: #ec4899;
  --color-secondary-light: #f472b6;
  --color-secondary-dark: #db2777;
  --color-secondary-contrast: #ffffff;

  // 強調色（Gemini 藍色系）
  --color-accent: #3b82f6;
  --color-accent-light: #60a5fa;
  --color-accent-dark: #2563eb;
  --color-accent-contrast: #ffffff;

  // 背景顏色
  --color-background: #ffffff;
  --color-surface: #f8fafc;
  --color-surface-variant: #f1f5f9;
  --color-surface-hover: #e2e8f0;

  // 文字顏色
  --color-on-background: #1e293b;
  --color-on-surface: #334155;
  --color-on-surface-variant: #64748b;
  --color-text-secondary: #94a3b8;
  --color-text-disabled: #cbd5e1;

  // 邊框顏色
  --color-border: #e2e8f0;
  --color-border-light: #f1f5f9;
  --color-divider: #e2e8f0;

  // 陰影
  --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
  --shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px -1px rgba(0, 0, 0, 0.1);
  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1);
  --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1);

  // 成功/警告/錯誤顏色
  --color-success: #10b981;
  --color-success-light: #34d399;
  --color-warning: #f59e0b;
  --color-warning-light: #fbbf24;
  --color-error: #ef4444;
  --color-error-light: #f87171;

  // 漸層（Gemini 經典漸層）
  --gradient-primary: linear-gradient(135deg, #8b5cf6 0%, #ec4899 50%, #3b82f6 100%);
  --gradient-surface: linear-gradient(180deg, #ffffff 0%, #f8fafc 100%);
  --gradient-text: linear-gradient(135deg, #8b5cf6 0%, #ec4899 50%, #3b82f6 100%);

  // 圓角
  --radius-sm: 8px;
  --radius-md: 12px;
  --radius-lg: 16px;
  --radius-xl: 24px;
  --radius-full: 9999px;

  // 動畫時間
  --transition-fast: 150ms;
  --transition-base: 200ms;
  --transition-slow: 300ms;
}

/**
 * ==================== 深色主題 ====================
 */
body[data-theme='dark'],
body.dark-theme {
  // 主要顏色（霓虹紫色）
  --color-primary: #a78bfa;
  --color-primary-light: #c4b5fd;
  --color-primary-dark: #8b5cf6;
  --color-primary-contrast: #000000;

  // 次要顏色（霓虹粉色）
  --color-secondary: #f472b6;
  --color-secondary-light: #f9a8d4;
  --color-secondary-dark: #ec4899;
  --color-secondary-contrast: #000000;

  // 強調色（霓虹藍色）
  --color-accent: #60a5fa;
  --color-accent-light: #93c5fd;
  --color-accent-dark: #3b82f6;
  --color-accent-contrast: #000000;

  // 背景顏色（True-black）
  --color-background: #000000;
  --color-surface: #1a1a1a;
  --color-surface-variant: #2d2d2d;
  --color-surface-hover: #333333;

  // 文字顏色
  --color-on-background: #ffffff;
  --color-on-surface: #e2e8f0;
  --color-on-surface-variant: #cbd5e1;
  --color-text-secondary: #94a3b8;
  --color-text-disabled: #64748b;

  // 邊框顏色
  --color-border: #2d2d2d;
  --color-border-light: #262626;
  --color-divider: #2d2d2d;

  // 陰影（深色主題使用更亮的陰影）
  --shadow-sm: 0 1px 2px 0 rgba(255, 255, 255, 0.05);
  --shadow: 0 1px 3px 0 rgba(255, 255, 255, 0.1), 0 1px 2px -1px rgba(255, 255, 255, 0.1);
  --shadow-md: 0 4px 6px -1px rgba(255, 255, 255, 0.1), 0 2px 4px -2px rgba(255, 255, 255, 0.1);
  --shadow-lg: 0 10px 15px -3px rgba(255, 255, 255, 0.1), 0 4px 6px -4px rgba(255, 255, 255, 0.1);
  --shadow-xl: 0 20px 25px -5px rgba(255, 255, 255, 0.1), 0 8px 10px -6px rgba(255, 255, 255, 0.1);

  // 發光效果（深色主題特有）
  --glow-primary: 0 0 20px rgba(167, 139, 250, 0.5);
  --glow-secondary: 0 0 20px rgba(244, 114, 182, 0.5);
  --glow-accent: 0 0 20px rgba(96, 165, 250, 0.5);

  // 成功/警告/錯誤顏色
  --color-success: #34d399;
  --color-success-light: #6ee7b7;
  --color-warning: #fbbf24;
  --color-warning-light: #fcd34d;
  --color-error: #f87171;
  --color-error-light: #fca5a5;

  // 漸層（霓虹漸層）
  --gradient-primary: linear-gradient(135deg, #a78bfa 0%, #f472b6 50%, #60a5fa 100%);
  --gradient-surface: linear-gradient(180deg, #000000 0%, #1a1a1a 100%);
  --gradient-text: linear-gradient(135deg, #a78bfa 0%, #f472b6 50%, #60a5fa 100%);

  // 圓角（與淺色主題相同）
  --radius-sm: 8px;
  --radius-md: 12px;
  --radius-lg: 16px;
  --radius-xl: 24px;
  --radius-full: 9999px;

  // 動畫時間（與淺色主題相同）
  --transition-fast: 150ms;
  --transition-base: 200ms;
  --transition-slow: 300ms;
}

/**
 * ==================== 全域樣式覆寫 ====================
 */

// 背景顏色
body {
  background-color: var(--color-background);
  color: var(--color-on-background);
  transition: background-color var(--transition-base) ease,
              color var(--transition-base) ease;
}

// 捲軸樣式（Gemini 風格）
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: var(--color-surface);
}

::-webkit-scrollbar-thumb {
  background: var(--color-border);
  border-radius: var(--radius-full);

  &:hover {
    background: var(--color-on-surface-variant);
  }
}

// 深色主題的捲軸發光效果
body[data-theme='dark'] {
  ::-webkit-scrollbar-thumb {
    &:hover {
      box-shadow: var(--glow-primary);
    }
  }
}

/**
 * ==================== 漸層文字效果 ====================
 * Gemini 特色的漸層標題
 */
.gradient-text {
  background: var(--gradient-text);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  font-weight: 700;
}

/**
 * ==================== 漸層按鈕效果 ====================
 */
.gradient-button {
  background: var(--gradient-primary);
  color: white;
  border: none;
  padding: 12px 24px;
  border-radius: var(--radius-md);
  font-weight: 600;
  cursor: pointer;
  transition: transform var(--transition-fast) ease,
              box-shadow var(--transition-fast) ease;

  &:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-lg);
  }

  &:active {
    transform: translateY(0);
  }
}

// 深色主題的按鈕發光
body[data-theme='dark'] {
  .gradient-button:hover {
    box-shadow: var(--glow-primary);
  }
}

/**
 * ==================== 卡片樣式 ====================
 */
.gemini-card {
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-lg);
  padding: 24px;
  transition: all var(--transition-base) ease;

  &:hover {
    border-color: var(--color-primary);
    box-shadow: var(--shadow-md);
  }
}

// 深色主題的卡片發光
body[data-theme='dark'] {
  .gemini-card:hover {
    box-shadow: var(--glow-primary);
  }
}

/**
 * ==================== 載入動畫 ====================
 * Gemini 風格的脈衝動畫
 */
@keyframes gemini-pulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.5;
  }
}

.loading-pulse {
  animation: gemini-pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

/**
 * ==================== 漸層背景動畫 ====================
 */
@keyframes gradient-shift {
  0%, 100% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
}

.animated-gradient {
  background: var(--gradient-primary);
  background-size: 200% 200%;
  animation: gradient-shift 3s ease infinite;
}

/**
 * ==================== View Transitions 動畫 ====================
 * Angular Router 頁面切換動畫（Gemini 風格）
 *
 * 使用 View Transitions API 實現流暢的頁面轉場
 */

// 瀏覽器支援檢測
@supports (view-transition-name: none) {

  /**
   * 根元素轉場
   * 預設的淡入淡出 + 輕微縮放效果
   */
  ::view-transition-old(root),
  ::view-transition-new(root) {
    animation-duration: 300ms;
    animation-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  }

  /**
   * 舊頁面退出動畫
   * 淡出 + 輕微縮小
   */
  ::view-transition-old(root) {
    animation-name: fade-out-scale;
  }

  /**
   * 新頁面進入動畫
   * 淡入 + 輕微放大
   */
  ::view-transition-new(root) {
    animation-name: fade-in-scale;
  }

  /**
   * 自訂轉場動畫
   * 可在特定路由使用不同動畫
   */
  @keyframes fade-out-scale {
    from {
      opacity: 1;
      transform: scale(1);
    }
    to {
      opacity: 0;
      transform: scale(0.95);
    }
  }

  @keyframes fade-in-scale {
    from {
      opacity: 0;
      transform: scale(1.05);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }

  /**
   * 滑動效果（可選）
   * 適用於上下頁面導航
   */
  @keyframes slide-from-right {
    from {
      transform: translateX(100%);
    }
    to {
      transform: translateX(0);
    }
  }

  @keyframes slide-to-left {
    from {
      transform: translateX(0);
    }
    to {
      transform: translateX(-100%);
    }
  }

  // 深色主題的轉場增強（發光效果）
  body[data-theme='dark'] {
    ::view-transition-old(root),
    ::view-transition-new(root) {
      filter: drop-shadow(0 0 20px rgba(167, 139, 250, 0.3));
    }
  }
}

// Fallback：不支援 View Transitions 的瀏覽器
@supports not (view-transition-name: none) {
  // 使用簡單的 opacity 動畫
  router-outlet ~ * {
    animation: simple-fade-in 300ms ease;
  }

  @keyframes simple-fade-in {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }
}
